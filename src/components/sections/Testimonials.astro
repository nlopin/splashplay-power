---
import { Image } from "astro:assets";
import { getPageTranslations } from "../../utils/i18n";
import sveta1 from "../../assets/photo/reviews/sveta1.webp";
import mario from "../../assets/photo/reviews/mario.webp";
import eliseo from "../../assets/photo/reviews/eliseo.webp";
import anastasia from "../../assets/photo/reviews/anastasia.webp";
import sergio from "../../assets/photo/reviews/sergio.webp";

const t = getPageTranslations(Astro.currentLocale, "main");

const reviews = [
    {
        name: "Sveta",
        avatar: sveta1,
        contentKey: "sveta",
    },
    {
        name: "Mario",
        avatar: mario,
        contentKey: "mario",
    },
    {
        name: "Eliseo",
        avatar: eliseo,
        contentKey: "eliseo",
    },
    {
        name: "Anastasia",
        avatar: anastasia,
        contentKey: "anastasia",
    },
    {
        name: "Jordi",
        contentKey: "jordi",
    },
    {
        name: "Sergio",
        avatar: sergio,
        contentKey: "sergio",
    },
] as const;
---

<section id="reviews" class="reviews">
    <div class="container">
        <h2 class="section-title">{t.testimonials_title}</h2>

        <div class="reviews-container">
            <div class="reviews-grid">
                {
                    reviews.map((review) => {
                        const content = t.reviews[review.contentKey];
                        return (
                            <div class="review-item">
                                <div class="review-item-header">
                                    {"avatar" in review ? (
                                        <div class="review-item-header-avatar">
                                            <Image
                                                src={review.avatar}
                                                alt={`${review.name}'s Avatar`}
                                                width={64}
                                                height={64}
                                            />
                                        </div>
                                    ) : null}
                                    <div class="review-item-header-name">
                                        {review.name}
                                    </div>
                                </div>
                                <Fragment set:html={content} />
                            </div>
                        );
                    })
                }
            </div>
        </div>
    </div>
</section>

<style>
    /* Reviews Section */
    .reviews {
        padding: 3rem 0;
        scroll-margin-top: 60px;
        width: 100%;
        overflow: hidden;
    }

    .reviews .container {
        padding: 0;
        max-width: none;
        width: 100%;
    }

    .reviews-grid {
        display: flex;
        gap: 1.5rem;
        width: 100%;
        margin: 0;
        padding: 1rem 0 1.5rem;
        overflow-x: auto;
        scroll-padding: 1.5rem;
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
        scrollbar-color: var(--orange) #f0f0f0;
        scroll-behavior: smooth;
    }

    .reviews-grid::before,
    .reviews-grid::after {
        content: "";
        flex: 0 0 1rem;
    }

    .review-item {
        flex: 0 0 auto;
        width: 320px;
        overflow: hidden;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(0, 0, 0, 0.06);
        position: relative;
        transition:
            transform 0.3s ease,
            box-shadow 0.3s ease;
        scroll-snap-align: start;
        padding: 1rem 1rem 1.5rem;
        color: var(--dark-text);
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .review-item:nth-child(odd) {
        background-color: var(--purple-tint-bg);
    }
    .review-item:nth-child(even) {
        background-color: var(--orange-tint-bg);
    }

    .review-item-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        min-height: 4rem;
    }

    .review-item-header-name {
        font-weight: 700;
        color: var(--purple);
    }

    .review-item-header-avatar {
        width: 4rem;
        aspect-ratio: 1 / 1;
        overflow: hidden;
        border-radius: 50%;
        border: 2px solid rgba(255, 107, 53, 0.35);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    }

    .review-item-header-avatar img {
        width: 100%;
        height: 100%;
        display: block;
        object-fit: cover;
    }

    .section-title {
        text-align: center;
        font-size: 1.8rem;
        color: var(--purple);
        margin-bottom: 2rem;
    }
</style>
