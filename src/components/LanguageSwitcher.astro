---
import type { Language } from "../utils/i18n";
import { getAlternateLanguageLinks, getCurrentLanguage } from "../utils/i18n";

interface Props {
    currentPath: string;
}

const { currentPath } = Astro.props;
const currentLanguage = getCurrentLanguage(Astro.currentLocale);
const alternateLinks = getAlternateLanguageLinks(currentPath, currentLanguage);
---

<div class="language-switcher">
    {
        alternateLinks.map(({ language, url, current }, index) => (
            <>
                <a href={url} class:list={["lang-link", { active: current }]}>
                    {language.toUpperCase()}
                </a>
                {index < alternateLinks.length - 1 && (
                    <span class="separator">|</span>
                )}
            </>
        ))
    }
</div>

<style>
    .language-switcher {
        display: flex;
        align-items: center;
        gap: 8px;
        font-family: "Montserrat", sans-serif;
        font-weight: 600;
        font-size: 14px;
    }

    .lang-link {
        text-decoration: none;
        color: var(--purple);
        transition: color 0.2s;
        padding: 4px;
    }

    .lang-link:hover {
        color: var(--orange);
    }

    .lang-link.active {
        color: var(--orange);
        cursor: default;
        pointer-events: none;
    }

    .separator {
        color: var(--purple);
        opacity: 0.5;
    }

    @media (max-width: 768px) {
        .language-switcher {
            margin: 10px 0;
            justify-content: center;
        }
    }
</style>
